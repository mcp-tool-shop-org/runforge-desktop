<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:vm="clr-namespace:RunForgeDesktop.ViewModels"
             x:Class="RunForgeDesktop.Views.WorkspaceDashboardPage"
             x:DataType="vm:WorkspaceDashboardViewModel"
             Title="Workspace Dashboard">

    <Grid RowDefinitions="Auto,Auto,*" Padding="20">

        <!-- Row 0: Header -->
        <VerticalStackLayout Grid.Row="0" Spacing="6" Margin="0,0,0,24">
            <Label Text="Workspace Dashboard"
                   FontSize="28"
                   FontAttributes="Bold"
                   TextColor="{AppThemeBinding Light=#1E3A5F, Dark=#E0E0E0}" />
            <Label Text="Monitor and manage runs in your RunForge workspace."
                   FontSize="14"
                   TextColor="{AppThemeBinding Light=#666666, Dark=#999999}" />
        </VerticalStackLayout>

        <!-- Row 1: Workspace Card -->
        <Border Grid.Row="1"
                BackgroundColor="{AppThemeBinding Light=#FFFFFF, Dark=#2A2A2A}"
                Stroke="{AppThemeBinding Light=#E0E0E0, Dark=#404040}"
                StrokeThickness="1"
                StrokeShape="RoundRectangle 8"
                Padding="20"
                Margin="0,0,0,16">

            <Grid RowDefinitions="Auto,Auto,Auto" RowSpacing="16">
                <!-- Workspace header -->
                <Label Grid.Row="0"
                       Text="Current Workspace"
                       FontSize="16"
                       FontAttributes="Bold"
                       TextColor="{AppThemeBinding Light=#333333, Dark=#EEEEEE}" />

                <!-- Workspace path or "not selected" state -->
                <VerticalStackLayout Grid.Row="1" Spacing="8">
                    <!-- When workspace IS set -->
                    <VerticalStackLayout IsVisible="{Binding HasWorkspace}" Spacing="4">
                        <Label Text="{Binding WorkspacePath}"
                               FontSize="13"
                               FontFamily="Consolas"
                               TextColor="{AppThemeBinding Light=#1E3A5F, Dark=#4A90C2}"
                               LineBreakMode="MiddleTruncation" />
                        <HorizontalStackLayout Spacing="8">
                            <Label Text="âœ“"
                                   FontSize="12"
                                   TextColor="{AppThemeBinding Light=#4CAF50, Dark=#81C784}" />
                            <Label Text="Workspace loaded"
                                   FontSize="12"
                                   TextColor="{AppThemeBinding Light=#4CAF50, Dark=#81C784}" />
                        </HorizontalStackLayout>
                    </VerticalStackLayout>

                    <!-- When workspace NOT set -->
                    <VerticalStackLayout IsVisible="{Binding HasWorkspace, Converter={StaticResource InverseBoolConverter}}" Spacing="4">
                        <Label Text="No workspace selected"
                               FontSize="14"
                               TextColor="{AppThemeBinding Light=#888888, Dark=#777777}" />
                        <Label Text="Select a folder containing RunForge outputs to get started."
                               FontSize="12"
                               TextColor="{AppThemeBinding Light=#AAAAAA, Dark=#666666}" />
                    </VerticalStackLayout>
                </VerticalStackLayout>

                <!-- Action buttons -->
                <HorizontalStackLayout Grid.Row="2" Spacing="12">
                    <Button Text="{Binding HasWorkspace, Converter={StaticResource BoolToStringConverter}, ConverterParameter='Change Workspace|Select Workspace'}"
                            Command="{Binding SelectWorkspaceCommand}"
                            BackgroundColor="{AppThemeBinding Light=#1E3A5F, Dark=#4A7BA7}"
                            TextColor="White"
                            CornerRadius="4"
                            Padding="20,12"
                            FontSize="14" />

                    <Button Text="Browse Runs"
                            Command="{Binding BrowseRunsCommand}"
                            IsVisible="{Binding HasWorkspace}"
                            BackgroundColor="{AppThemeBinding Light=#4CAF50, Dark=#388E3C}"
                            TextColor="White"
                            CornerRadius="4"
                            Padding="20,12"
                            FontSize="14" />

                    <Button Text="Diagnostics"
                            Command="{Binding OpenDiagnosticsCommand}"
                            BackgroundColor="Transparent"
                            TextColor="{AppThemeBinding Light=#1E3A5F, Dark=#4A7BA7}"
                            FontSize="13"
                            Padding="12,8" />
                </HorizontalStackLayout>
            </Grid>
        </Border>

        <!-- Row 2: Execution Now placeholder (filled in Commit 3) -->
        <Border Grid.Row="2"
                BackgroundColor="{AppThemeBinding Light=#F8F8F8, Dark=#252525}"
                Stroke="{AppThemeBinding Light=#E0E0E0, Dark=#404040}"
                StrokeThickness="1"
                StrokeShape="RoundRectangle 8"
                Padding="20"
                IsVisible="{Binding HasWorkspace}">

            <VerticalStackLayout VerticalOptions="Center" HorizontalOptions="Center" Spacing="8">
                <Label Text="Execution Status"
                       FontSize="14"
                       FontAttributes="Bold"
                       TextColor="{AppThemeBinding Light=#888888, Dark=#666666}"
                       HorizontalTextAlignment="Center" />
                <Label Text="Coming in next update"
                       FontSize="12"
                       TextColor="{AppThemeBinding Light=#AAAAAA, Dark=#555555}"
                       HorizontalTextAlignment="Center" />
            </VerticalStackLayout>
        </Border>

        <!-- Footer with build stamp -->
        <Label Grid.Row="2"
               x:Name="BuildStampLabel"
               VerticalOptions="End"
               HorizontalOptions="Center"
               FontSize="11"
               TextColor="{AppThemeBinding Light=#BBBBBB, Dark=#555555}"
               Margin="0,0,0,8" />

    </Grid>

</ContentPage>
